(function(){var a=(function(){var d=null,l=null,e=null,i=null,h=null,m=function(){d=document.createElement("canvas");d.style.display="none";var n=document.getElementsByTagName("body")[0];n.appendChild(d);l=d.getContext("2d")},b=function(n){i=document.getElementById(n);d.width=i.width;d.height=i.height;i.setAttribute("style","visibility:hidden;");h=k(i);e=null;l.drawImage(i,0,0)},g=function(n){d.width=n.width;d.height=n.height;l.drawImage(n,0,0,n.width,n.height)},j=function(){var p=l.getImageData(0,0,d.width,d.height),q=p.data;var n=new Worker("worker.js"),o=[q,d.width,d.height];n.postMessage(o);n.onmessage=function(r){c(r.data)}},c=function(o){if(e){e(o)}if(i!=null){if(o){var p=document.createElement("div");p.setAttribute("style","position:absolute;width:300px;left:"+(h.left+(d.width/2)-150)+"px;top:"+(h.top+(d.height/2))+"px;z-index:100000;cursor:pointer;padding:10px;background-color:#d9d9d9;font-family:Arial;color:#df0019;");p.innerHTML="<strong>The image contains nudity.</strong><br /><span style='color:#444;'>If this image definitely does not contain nudity click on this message</span>";p.onclick=function(){this.setAttribute("style","display:none");i.setAttribute("style","visibility:visible;")};var n=document.getElementsByTagName("body")[0];n.appendChild(p)}else{i.setAttribute("style","visibility:visible;")}}},f=function(){var q=skinRegions.length;for(var t=0;t<q;t++){var v=skinRegions[t],s=v.length,r=Math.ceil(Math.random()*255),w=Math.ceil(Math.random()*255),x=Math.ceil(Math.random()*255);for(var p=0;p<s;p++){var n=l.getImageData(v[p].x,v[p].y,1,1),u=n.data;u[0]=r;u[1]=w;u[2]=x;n.data=u;l.putImageData(n,v[p].x,v[p].y)}}},k=function(o){var n=0,p=0;while(o!=null){n+=o.offsetLeft;p+=o.offsetTop;o=o.offsetParent}return{left:n,top:p}};return{init:function(){m()},load:function(n){if(typeof(n)!="string"){g(n)}else{b(n)}},scan:function(n){if(arguments.length>0&&typeof(arguments[0])=="function"){e=n}j()}}})();if(!window.nude){window.nude=a}})();window.onload=function(){nude.init()};